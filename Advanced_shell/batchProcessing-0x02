#!/bin/bash

# مصفوفة البوكيمونات
pokemons=("bulbasaur", "ivysaur", "venusaur", "charmander", "charmeleon")

# مجلد حفظ البيانات
OUTPUT_DIR="pokemon_data"

# إنشاء المجلد لو مش موجود
mkdir -p "$OUTPUT_DIR"

# حلقة على كل بوكيمون
for p in "${pokemons[@]}"; do
    # اسم الملف بخط صغير
    file_name="$OUTPUT_DIR/$(echo $p | tr '[:upper:]' '[:lower:]').json"

    echo "Fetching data for $p..."

    # طلب API
    if curl -s -f "https://pokeapi.co/api/v2/pokemon/$(echo $p | tr '[:upper:]' '[:lower:]')" -o "$file_name"; then
        echo "Saved data to $file_name ✅"
    else
        echo "Failed to fetch data for $p" >&2
    fi

    # تأخير بسيط لتجنب rate limiting
    sleep 1
done

#outputexample:

'''Fetching data for Bulbasaur...
Saved data to pokemon_data/bulbasaur.json ✅
Fetching data for Ivysaur...
Saved data to pokemon_data/ivysaur.json ✅
Fetching data for Venusaur...
Saved data to pokemon_data/venusaur.json ✅
Fetching data for Charmander...
Saved data to pokemon_data/charmander.json ✅
Fetching data for Charmeleon...
Saved data to pokemon_data/charmeleon.json ✅'''